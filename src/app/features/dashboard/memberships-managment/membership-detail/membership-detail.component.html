<div class="bg-white d-flex flex-column justify-content-center py-3 mx-5 header border custom-rounded">
    <div class="d-flex align-items-center ps-4 pe-5">
        <span class="material-symbols-outlined mr-2 px-3 fs-1" (click)="navigateToDashboard()"
            style="cursor: pointer; color: #666666;">
            arrow_back
        </span>
        <h2 class="mb-0" style="color: #666666;">Membresía No. {{selectedMembership?.id}}</h2>

        <div class="ms-auto">
            <button class="btn btn-primary btn-sm me-1 border-0" title="Editar membresía" [disabled]="!isFormModified"
                (click)="updateMembershipById()">
                <span class="material-symbols-outlined fs-5">edit</span>
            </button>

            <button class="btn btn-danger btn-sm ms-1 border-0" title="Eliminar membresía"
                (click)="selectedMembership ? deleteMembershipById(selectedMembership.id) : null">
                <span class="material-symbols-outlined fs-5">delete_forever</span>
            </button>
        </div>
    </div>
</div>

<div class="m-5 content">
    <div class="bg-white px-5 py-4 rounded-5 border">
        <div class="mb-5">
            <h4>Información principal</h4>
        </div>
        <section *ngIf="selectedMembership">
            <form [formGroup]="membershipForm" (ngSubmit)="updateMembershipById()">
                <div class="row mb-3">
                    
                    <div class="col">
                        <label for="institutionName" class="form-label">Nombre de la institución</label>
                        <select class="form-select" id="institutionName" formControlName="institutionName">
                          <option *ngFor="let name of institutionNames" [value]="name">{{ name }}</option>
                        </select>
                        <div
                            *ngIf="membershipForm.get('institutionName')?.touched && membershipForm.get('institutionName')?.invalid">
                            <small class="error-message"
                                *ngIf="membershipForm.get('institutionName')?.errors?.['required']">
                                El nombre de la institución es requerido.
                            </small>
                        </div>
                      </div>
                      
                    
                    <div class="col">
                        <label for="status" class="form-label">Estado de la membresía</label>
                        <select class="form-select" id="status" formControlName="status"
                            [value]="selectedMembership.status">
                            <option [value]="true">Activa</option>
                            <option [value]="false">Inactiva</option>
                        </select>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <label for="startDate" class="form-label">Fecha de inicio</label>
                        <input type="date" class="form-control" id="startDate" formControlName="startDate"
                            [value]="selectedMembership.startDate | date:'yyyy-MM-dd'">
                    </div>
                    <div class="col">
                        <label for="endDate" class="form-label">Fecha de finalizacion</label>
                        <input type="date" class="form-control" id="endDate" formControlName="endDate"
                            [value]="selectedMembership.endDate | date:'yyyy-MM-dd'">
                    </div>
                </div>

                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>
                
            </form>
        </section>
    </div>
</div>